let v=[],am,dt,gd,di,ss,sl,tw,ex,bw,b=5,e=!1,g=!1,f=!0;function setParameters(){di=0;let a=fxrand();if(a<.1&&(f=!1),b=(a=fxrand())<.2?5:a<.5?20:10,a=fxrand(),a<.1?(ss=round(fxr(800,900)),sl="long"):a<.35?(ss=round(fxr(300,340)),sl="medium"):(ss=round(fxr(50,60)),sl="short"),a=fxrand(),a<.1?(am=round(fxr(20,30)),dt="scarce"):a<.28?(am=round(fxr(50,80)),dt="low"):a<.59?(am=round(fxr(300,350)),dt="high"):(am=round(fxr(100,150)),dt="medium"),a=fxrand(),gd=a<.01?0:a<.05?4:a<.15?8:a<.4?13:20,a=fxrand(),tw=a<.1?12:a<.3?30:20,a=fxrand(),ex=a<.05?100:a<.5?210:280,a=fxrand(),bw=a<.03?0:a<.35?5:a<.9?10:15,pt=rfa(pts),ptn=pt.name,a=fxrand(),a<=.03)bw=4,ex=50,tw=6,ss=round(fxr(800,810)),sl="long",am=round(fxr(1e3,1050)),dt="extreme";else if(a<.35){bw=round(tw*fxr(.3,.6));let d=fxrand();ss=d<=.3?round(fxr(5,10)):ss,sl=d<.4?"ephemeral":sl,gd=26,e=!0}else a<.47?(tw=round(fxr(2,10)),bw=round(tw*fxr(.3,.6)),e=.6>fxrand()):a<.51&&(tw=round(fxr(10,25)),bw=round(tw*fxr(.4,.7)),f=.2>fxrand(),e=!0);for(let c=0;c<am;c++)v[c]=new varillas(tw);window.$fxhashFeatures={Duration:sl,Steps:ss,Density:dt,Grain:gd,Length:ex,Width:tw,Spacing:bw,Frame:f,FrameWidth:b,Organized:!0!=e,Palette:pt.name,Sticks:am},console.log(window.$fxhashFeatures)}function setup(){s=797,frameRate(30),createCanvas(s*(i=.8),s),pixelDensity(4),setParameters(),noStroke(),background(pt.bgColor)}function draw(){if(ss==di)!1==g&&(!0==f&&(rectMode(CORNERS),noStroke(),fill(pt.fColor),rect(0,0,width,b),rect(0,height-b,width,height),rect(0,0,b,height),rect(width-b,0,width,height)),texturize(gd)),fxpreview(),noLoop();else{for(let a=0;a<am;a++)v[a]._a();di+=1}}class varillas{constructor(a){(this.c=pt.colors[round(fxr(0,pt.colors.length-1))],this.d=fxr(.01,.2),this.l=round(fxr(30,200)),"high"==dt)?(this.d=fxr(.01,.1),this.l=round(fxr(70,135))):"scarce"==dt&&(.2>fxrand()?(this.d=fxr(.01,.1),this.l=fxr(200,350)):(this.l=500,this.d=fxr(.2,.5))),this.t=0,this.w=a,this.e=ex,this.v=.5>fxr(),this.x1=round(20*fxr(b,int(width/20))-b),this.x2=round(20*fxr(b,int(width/20))-b),this.y1=round(20*fxr(b,int(width/20))-b),this.y2=round(20*fxr(b,int(width/20))-b),this.X2=this.x1<width/2?this.x1+this.e:this.x1-this.e,this.Y2=this.y1<height/2?this.y1+this.e:this.y1-this.e,this._i()}_i(){(this.t=0,this.l=round(fxr(30,200)),"high"==dt)?this.l=round(fxr(70,135)):"scarce"==dt&&(.2>fxrand()?this.l=fxr(200,350):this.l=500),this.v=.5>fxrand(),!0==e?(this.x1=round(40*fxr(1,int(width/40))),this.x2=round(40*fxr(1,int(width/40))),this.y1=round(40*fxr(1,int(height/40))),this.y2=round(40*fxr(1,int(height/40))),this.x1<2*b&&(this.x1=2*b),this.y1<2*b&&(this.y1=2*b),this.x2>width-2*b&&(this.x2=width-2*b),this.y2>height-2*b&&(this.y2=height-2*b)):(this.x1=this.x2=round(40*fxr(1,int(width/40))),this.y1=this.y2=round(40*fxr(1,int(height/40))),this.x1<2*b&&(this.x1=2*b),this.y1<2*b&&(this.y1=2*b),this.x2>width-2*b&&(this.x2=width-2*b),this.y2>height-2*b&&(this.y2=height-2*b)),this.x1<width/2?this.X2=this.x1+this.e:this.X2=this.x1-this.e,this.y1<height/2?this.Y2=this.y1+this.e:this.Y2=this.y1-this.e,this.X1<2*b&&(this.X1=2*b),this.Y1<2*b&&(this.Y1=2*b),this.X2>width-2*b&&(this.X2=width-2*b),this.Y2>height-2*b&&(this.Y2=height-2*b)}_a(){this.x2=this._d(this.x2,this.X2,this.d),this.y2=this._d(this.y2,this.Y2,this.d),1>=abs(this.x2-this.X2)&&(this.t++,this.t>this.l&&(this.X1=this.X2,this.tarY1=this.Y2,this.x1=this._d(this.x1,this.X1,this.d),this.y1=this._d(this.y1,this.tarY1,this.d),1>=abs(this.x1-this.X1)&&this._i())),ss>di&&(stroke(pt.bgColor),strokeWeight(bw),fill(this.c),this.v?quad(this.x1,this.y1-this.w,this.x1,this.y1+this.w,this.x2,this.y2+this.w,this.x2,this.y2-this.w):quad(this.x1-this.w,this.y1,this.x1+this.w,this.y1,this.x2+this.w,this.y2,this.x2-this.w,this.y2))}_d(a,d,h){let c=d-a;return abs(c)>1&&(a+=c*h),a}}function rfa(a){return a[Math.floor(fxrand()*a.length)]}function fxr(a,c){return Array.isArray(a)?a[int(fxrand()*a.length)]:(void 0===c&&(c=a,a=0),fxrand()*(c-a)+a)}let pts=[{name:"Parana",bgColor:"#edf1e6",bgType:"light color",fColor:"#cad6b5",colorSignature:"yellow",colors:["#FFFFFF","#f5ad19","#000000"]},{name:"Resistencia",bgColor:"#F9EBE5",bgType:"light color",colorSignature:"red",colors:["#FEFCFB","#FEFCFB","#F3BDA5","#f3c4a5","#E77B4B","#B44818","#2D1206","#000","#000",],fColor:"#2d1c06"},{name:"Cordoba",bgColor:"#ece5ce",bgType:"light color",colorSignature:"pastry",colors:["#c5e0dc","#c5e0dc","#e08e79","#774f38","#fff"],fColor:"#f1d4af"},{name:"Neuquen",bgColor:"#EEEEEE",bgType:"light color",colorSignature:"blue",colors:["#00ADB5","#222831"],fColor:"#393E46"},{name:"Gualeguaychu",bgColor:"#D2D3C3",fColor:"#1D1C18",bgType:"light color",colorSignature:"colorfull",colors:["#00A0B0","#6A4A3C","#CC333F","#EB6841","#EDC951"]},{name:"Strobel",bgColor:"#eae9e3",fColor:"#000",bgType:"light color",colorSignature:"spring",colors:["#99B898","#FECEA8","#FF847C","#E84A5F","#2A363B"]},{name:"Santa Rosa",bgColor:"#F9F7F6",fColor:"#faf3f1",bgType:"light color",colorSignature:"yellow",colors:["#EBAE5E","#EBAE5E","#888FA2","#888FA2","#000","#000","#000","#FFF","#FFF"]},{name:"Rosario",bgColor:"#D2D3C3",fColor:"#1D1C18",bgType:"light color",colorSignature:"spring",colors:["#774F38","#E08E79","#F1D4AF","#ECE5CE","#C5E0DC"]},{name:"Mendoza",bgColor:"#E5E4D9",fColor:"#9d9a70",bgType:"light color",colorSignature:"blue",colors:["#000000","#FFFFFF","#20658B","#20808b"]},{name:"Salta",bgColor:"#3E3D3C",bgType:"dark color",colorSignature:"cold",colors:["#FFF","#FBEDCA","#5E81A0","#BA4038","#2D1A0E","#D67E50","#729CAE","#000"],fColor:"#2D1206"},{name:"Usuahia",bgColor:"#1D4154",fColor:"#85B6CB",bgType:"dark color",colorSignature:"blue",colors:["#0F1E26","#fff","#447E9D"]},{name:"Concordia",bgColor:"#11171C",fColor:"#505f76",bgType:"dark color",colorSignature:"blue",colors:["#000000","#FFFFFF","#221A21","#254572","#8C9FBD","#B5531D"]},{name:"R\xedo Gallegos",bgColor:"#242A24",bgType:"dark color",colorSignature:"cold",colors:["#46594D","#95ADB6","#DFE3C8","#1F2621","#B9A35B"],fColor:"#FAFAFA"},{name:"Funes",bgColor:"#01232E",fColor:"#027385",bgType:"dark color",colorSignature:"cold",colors:["#E8DDCB","#CDB380","#036564","#033649","#031634"]},{name:"Iguazu",bgColor:"#050000",bgType:"dark color",colorSignature:"cold",colors:["#f59907","#a42300","#482a22","#6b0800"],fColor:"#FAFAFA"},{name:"Viedma",bgColor:"#ECE1C4",bgType:"cold color",colorSignature:"cold",colors:["#B2AEA1","#88542C","#7C3F1C","#010000","#A27444","#582210"],fColor:"#231D18"},{name:"Posadas",bgColor:"#397369",bgType:"cold color",colorSignature:"red",colors:["#E2534B","#CDC0B4","#091515"],fColor:"#316A5C"},{name:"Victoria",bgColor:"#F7E5CB",fColor:"#474035",bgType:"cold color",colorSignature:"retro",colors:["#111118","#766750","#F67A3B","#FDEDCD","#505f76"]},{name:"CABA",bgColor:"#F6DB4B",bgType:"yellow color",colorSignature:"yellow",colors:["#F6F5EB","#1A1910"],fColor:"#4D4C4D"},{name:"La Rioja",bgColor:"#D4CBB2",bgType:"cold color",colorSignature:"grayscale",colors:["#e9e2ca","#0E0C04","#1C1910","#c7c3b2","#6C6C61"],fColor:"#FAFAFA"},{name:"Tierra del Fuego",bgColor:"#F05454",bgType:"dark color",colorSignature:"cold",colors:["#DDDDDD","#30475E","#222831"],fColor:"#3f0606"},{name:"Retro1",bgColor:"#d8d8c0",bgType:"dark color",colorSignature:"cold",colors:["#f0a848","#60a8a8","#d86060","#f0f0d8"],fColor:"#ACBCA7"},{name:"Mondrian",bgColor:"#ffffff",bgType:"dark color",colorSignature:"cold",colors:["#fac901","#225095","#dd0100"],fColor:"#000000"},{name:"Retro2",bgColor:"#EB9438",bgType:"dark color",colorSignature:"cold",colors:["#ED4704","#2FBDB8","#E7E7AA","#156461","#2FBDB8","#2FBDB8"],fColor:"#000000"}];function texturize(d){loadPixels();for(var a=0;a<width*pixelDensity()*height*pixelDensity()*4;a+=4){var c=map(fxrand(),0,1,-d,d);pixels[a]+=c,pixels[a+1]+=c,pixels[a+2]+=c,pixels[a+3]+=c}updatePixels()}function keyPressed(){"e"==key&&save("Varillas_"+fxhash+".png")}
