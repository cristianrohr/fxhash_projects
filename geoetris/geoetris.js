let size,pg,palette,palettename,partitions,background,noisy,fSize=2e3;function setup(){if(size=windowHeight<windowWidth?windowHeight:windowWidth,createCanvas(size,size),pg=createGraphics(fSize,fSize),pixelDensity(2),pg.pixelDensity(2),noLoop(),frameRate(30),palette=randomFromArray(palettes),palettename=palette.name,palette=fxshuffle(palette.arr),pg.background(palette[0]),background=palette[0],palette.shift(),1==(noisy=!(fxrand()<.1))){pg.push();let e=fxrand();partitions=e<.5?8:e<.8?7:e<.95?6:9,randomizeart(0,0,fSize,fSize,e<.5?8:e<.8?7:e<.95?6:9),pg.pop()}else{pg.push();let e=fxrand();partitions=e<.5?8:e<.8?7:e<.95?6:9,randomizeart2(0,0,fSize,fSize,e<.5?8:e<.8?7:e<.95?6:9),pg.pop()}}function randomizeart(e,a,r,n,t){pg.push(),pg.translate(e,a),pg.noStroke(),pg.fill(randomFromArray(palette));let i=fxrand();composition=fxrand(),composition<.7?pg.rect(r*(1-i)/1,n*(1-i)/1,r*i*fxrandom(0,.5),n*i*fxrandom(0,.5),10):pg.circle(r*(1-i)/1,n*(1-i)/1,r*i*fxrandom(0,.5)),pg.noStroke(),pg.fill(randomFromArray(palette));for(var o=0;o<fxrandom(50,100);o++)pg.ellipse(r+fxrandom(-r,r)*fxrandom(0,1),n+fxrandom(-r,r)*fxrandom(0,1),fxrandom(0,sqrt(r)/3));pg.strokeWeight(4);let d=fxrandom(.4,.6);t>0&&(fxrand()<.5?(randomizeart(0+r*d,0,r*(1-d),n,t-1),randomizeart(0,0,r*d,n,t-1)):(randomizeart(0,0+n*d,r,n*(1-d),t-1),randomizeart(0,0,r,n*d,t-1))),pg.pop()}function randomizeart2(e,a,r,n,t){pg.push(),pg.translate(e,a),pg.noStroke(),pg.fill(randomFromArray(palette));let i=fxrand();composition=fxrand(),composition<.7?pg.rect(r*(1-i)/1,n*(1-i)/1,r*i*fxrandom(0,.5),n*i*fxrandom(0,.5),5):pg.circle(r*(1-i)/1,n*(1-i)/1,r*i*fxrandom(0,.5)),pg.strokeWeight(4);let o=fxrandom(.4,.6);t>0&&(fxrand()<.5?(randomizeart2(0+r*o,0,r*(1-o),n,t-1),randomizeart2(0,0,r*o,n,t-1)):(randomizeart2(0,0+n*o,r,n*(1-o),t-1),randomizeart2(0,0,r,n*o,t-1))),pg.pop()}function draw(){image(pg,0,0,width,height),window.$fxhashFeatures={Palette:palettename,Partitions:partitions,Background:background,Noisy:noisy},print(window.$fxhashFeatures)}function keyPressed(){if("e"==key)save("geoetris.png");else if("s"==key){pixelDensity(5),sizeNew=2e3;let e=sizeNew/size;resizeCanvas(sizeNew,sizeNew),pg.scale(e),save("geoetris_highRes.png")}}function windowResized(){sizeNew=windowHeight<windowWidth?windowHeight:windowWidth;let e=sizeNew/size;resizeCanvas(sizeNew,sizeNew),pg.scale(e)}function randomFromArray(e){return e[Math.floor(fxrand()*e.length)]}function fxshuffle(e){for(var a,r,n=e.length;n;)r=floor(fxrand(1)*n--),a=e[n],e[n]=e[r],e[r]=a;return e}function fxrandom(e,a){return Array.isArray(e)?e[int(fxrand()*e.length)]:(void 0===a&&(a=e,e=0),fxrand()*(a-e)+e)}const palettes=[{name:"dark1",arr:["#222831","#393E46","#00ADB5","#EEEEEE"]},{name:"dark2",arr:["#1B262C","#0F4C75","#3282B8","#BBE1FA"]},{name:"dark3",arr:["#161616","#346751","#C84B31","#ECDBBA"]},{name:"vrolik1",arr:["#4ca787","#183867","#ea8857","#442a37","#ffb747"]},{name:"retro1",arr:["#DDDDDD","#222831","#30475E","#F05454"]},{name:"vrolik2",arr:["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"]},{name:"retro2",arr:["#0A1931","#185ADB","#FFC947","#EFEFEF"]},{name:"origami",arr:["#01364f","#84231e","#247c86","#e8674d","#dfdbbe","#fdf4b4"]},{name:"magma",arr:["#F7FD04","#F9B208","#F98404","#FC5404"]},{name:"jungle",arr:["#4e6349","#614128","#171812","#698144","#917861"]},{name:"lava",arr:["#f59907","#a42300","#482a22","#050000","#6b0800"]},{name:"tuscany",arr:["#500342","#023b59","#f9efdd","#deaa70","#711308"]}];
